---
title: 层叠与优先级
author: 熊滔
category: CSS
commentid: css:cascade-priority
---

一个元素有可能会被多个选择器选中，并且被应用相同的样式，这种情况我们称之为样式**层叠**

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <title>层叠</title>
    <style>
        div {
            color: green;
        }
        .red {
            color: red;
        }
        #box {
            color: brown;
        }
    </style>
</head>
<body>
    <div class="red" id="box" style="color: gray">
        一段文字
    </div>
</body>
</html>
```

上述的 `div` 标签被四个选择器选中，并且同时设置了 `color` 属性，那么哪个属性会生效呢?

<DisplayBox>

<CSS-Demo-13></CSS-Demo-13>

</DisplayBox>

这就牵涉到选择器优先级的问题了，优先级大小规则如下

```
行内样式 > id 选择器 > 类选择器、伪类选择器、属性选择器 > 标签选择器
```

所以上面行内样式会生效，文字颜色显示为 `gray` 灰色。

上面明确了单个选择器优先级的排序，但是对于组合选择器，是多个选择器的组合，它们的优先级又是如何? 它会按照如下顺序进行比较：

- id 选择器
- 类选择器、伪类选择器、属性选择器
- 标签选择器

首先会比较选择器中 `id` 选择器的个数，个数多的优先级高，如果个数相同，则继续比较类选择器、伪类选择器、属性选择器这三个选择器个数之和的大小，个数多的优先级高；如果还相同，则继续比较标签选择器的个数，个数多的选择器优先级高。如果比对完个数都相同，那么就看定义的顺序，定义在后面的选择器有高的优先级。

> 无论有多少个选择器，行内样式的优先级都比它们高！

在写样式的时候，我们可能会发现写的样式没有生效，排除拼写错误，很有可能是你的选择器优先级不够，这个时候你可能会在选择器上加上其他选择器，例如 `id` 选择器来提高它的优先级。那还有一种方法就是在样式的末尾加上 `!important`

```css
.container p {
    color: red;
}
p {
    color: blue;
}
```

下面的选择器的优先级没有上面的高，这时我们可以在样式后添加 `!important` 

```css
p {
    color: blue !important;
}
```

`!important` 可以使该条样式无视选择器的优先级，或者说将优先级提升为最高级别，使得被选中的标签使用该样式。

