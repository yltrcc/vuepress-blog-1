---
title: 伪类选择器
author: 熊滔
category: CSS
---

对于一个标签来说，他可能处于不同的状态，比如对超链接来说，它的状态有访问前、访问后等等，对于表单来说，它的状态有被选中，获得焦点，被禁用等等状态，我们希望对元素的不同状态添加不同的样式，这个时候就需要用到伪类选择器了。

## 链接伪类

当我们点击链接时，我们发现点击前后链接的样式会发生变化(例如颜色)，我们希望控制这些样式。我们使用伪类来表示标签的状态，例如对于链接来说有四种状态

- 未访问
- 触碰(鼠标放上去未点击)
- 激活状态(鼠标点击不放的过程，就处于激活状态)
- 已访问

与此相对应的伪类分别为

- `:link`
- `:hover`
- `:active`
- `:visited`

<CodeGroup>
<CodeGroupItem title="html" active>
```html
<div>
  <a href="http://www.bilibili.com" target="_blank">bilibili</a>
</div>
```
</CodeGroupItem>

<CodeGroupItem title="css">
```css
a:link {
  /* 未访问时，颜色为红色 */
  color: red;
}
a:visited {
  /* 访问之后，颜色为绿色 */
  color: green;
}
a:hover {
  /* 鼠标放上去时，颜色为粉色 */
  color: pink;
}
a:active {
  /* 鼠标点击不放的过程中，颜色为蓝色 */
  color: blue;
}
```
</CodeGroupItem>
</CodeGroup>

<DisplayBox>
<CSS-Demo-09></CSS-Demo-09>
</DisplayBox>

注意到上面为伪类添加样式书写的顺序为 `link visited hover active`，这可不是乱写的，要使得样式以希望的方式生效，就得以上面的顺序书写，这是因为样式的层叠导致的，具体会在层叠的章节进行解释。

> 上面的顺序我觉得不用记，原因有二：
>
> - 不记得去查就知道了
> - 后文讲述层叠的时候，对于为什么以这么个顺序写你自己可以想通，没必要记

在上述的伪类中，对于 `:hover` 伪类使用的最多，当我们将鼠标悬浮在某个元素上时，就会触发一个样式，比如给出一些提示，产生一个动画。

## 表单伪类

| 伪类     | 对应的状态           |
| -------- | -------------------- |
| `:focus`   | 获得焦点             |
| `:enable`  | 表单项可用 |
| `:disable` | 表单项不可用       |
| `:checked` | 单选框或复选框被选中 |
| `:valid` | 表单项校验通过时 |
| `:invalid` | 表单项校验不通过时 |
| `required` | |
| `optional` | |
| `:in-range` | |
| `:out-of-range` | |

### :focus

当表单项获得焦点时，我们可以通过 `:foucs` 伪类来获得该表单项，为其赋予特定的样式

<CodeGroup>
<CodeGroupItem title="html" active>
```html
<div>
  用户名：<input type="text" /> <br/>
  密码：<input type="password" />
</div>
```
</CodeGroupItem>

<CodeGroupItem title="css">
```css
input {
  border: 0;
  border-bottom: 2px solid black;
  outline: none;
  padding: 5px 10px;
}
input:focus {
  color: #579572;
  font-weight: bold;
}
```
</CodeGroupItem>
</CodeGroup>

<DisplayBox>
<CSS-Demo-26 />
</DisplayBox>

这里准备两个文本输入框，在 `CSS` 中，我们对于获得焦点的输入框添加了一些样式：文字颜色的改变以及文字变粗。

### :enabled 和 :disabled

我们为表单项设置 `disabled` 属性表示此表单项不可用，，我们就可以使用伪类 `:disabled` 来选中该表单项，为其设置特别的样式，与 `:disabled` 相反的状态就是 `:enabled`，表示表单项可用

<CodeGroup>
<CodeGroupItem title="html" active>
```html
<div>
  <input type="button" value="enabled">
  <input type="button" value="disabled" disabled>
</div>
```
</CodeGroupItem>

<CodeGroupItem title="css">
```css
input:enabled {
  color: green;
  font-weight: bold;
}
input:disabled {
  color: gray;
  font-weight: bold;
}
```
</CodeGroupItem>
</CodeGroup>

<DisplayBox>
<CSS-Demo-27 />
</DisplayBox>

在上面我们放置了两个按钮，其中一个按钮设置了 `disabled` 属性，我们分别为 `:enabled` 的按钮设置了其文字颜色为 `green`，为 `:disabled` 的表单项设置其文字颜色为 `gray`。

### :checked

当单选框或复选框被选中时，它的状态就是 `checked`，这时我们可以使用 `:checked` 伪类选中该元素

<CodeGroup>
<CodeGroupItem title="html" active>
```html
<div>
  <div>
    男：<input type="radio" name="gender">
    女：<input type="radio" name="gender">
  </div>
  <div>
    爱好：
    打篮球<input type="checkbox" name="habits" >
    踢足球<input type="checkbox" name="habits" >
    游泳<input type="checkbox" name="habits" >
  </div>
</div>
```
</CodeGroupItem>

<CodeGroupItem title="css">
```css
input:checked {
    transform: scale(1.5);
}
```
</CodeGroupItem>
</CodeGroup>

<DisplayBox>
<CSS-Demo-28 />
</DisplayBox>

当单选框或复选框被选中时，我们将其放大 1.5 倍。

### :valid 和 :invalid

在 `HTML5` 中新增一些属性，可以对用户的输入做一些验证，例如 `required` 要求用户必须用输入，当表单项满足验证规则时，它就是 `vaild`，否则它就是 `invalid`，我们分别可以使用 `:valid` 和 `:invalid` 伪类选中相应的元素

<CodeGroup>
<CodeGroupItem title="html" active>
```html
<div>
  用户名：<input type="text" required /><br>
  密码：<input type="password" required /><br>
  地址：<input type="text" />
</div>
```
</CodeGroupItem>

<CodeGroupItem title="css">
```css
input {
  font-family: Merriweather;
  border: 0;
  border-bottom: 2px solid black;
  outline: none;
}
input:valid {
  border-color: #45b787;
}
input:invalid {
  border-color: #ec2d7a;
}
```
</CodeGroupItem>
</CodeGroup>

<DisplayBox>
<CSS-Demo-29 />
</DisplayBox>

我们准备了三个输入框，其中用户名和密码输入框要求是必须输入的，而地址输入栏没有要求必须输入的，所以如果没有输入用户名和密码，那么相应的输入框就是 `invalid`，否则就是 `valid`，当输入框为 `invalid`，输入框底部的线条就是红色的，`valid` 状态的底部线条时绿色的。

## 结构伪类

### :nth-child() 和 :nth-last-child()

结构伪类可以根据 HTML 标签所处的位置来选择

```html
<div>
  <ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
  </ul>
</div>
```

假设我现在要选择第 2 个 `li` 标签，如果不添加类名，`id` 属性的情况下，通过已有的选择器是比较难以做到的，但是通过结构伪类选择器可以轻松的做到

```css
li:nth-child(2) {
    color: red;
}
```

<DisplayBox>

<CSS-Demo-10></CSS-Demo-10>

</DisplayBox>

`li:nth-child(2)` 伪类首先会找出 `li` 父标签下的所有子标签，然后为第二个子标签添加样式。

`:nth-child` 的标准语法为 `:nth-child(an + b)`，例如 `:nth-child(n + 2)`，n 从 0 开始计数，所以 `n + 2` 会得到 (2, 3, 4, 5)，因此除了第一个标签不会被选中，其他的标签都会被选中。

<CodeGroup>
<CodeGroupItem title="html" active>
```html
<div>
  <ul>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
  </ul>
</div>
```
</CodeGroupItem>

<CodeGroupItem title="css">
```css
li:nth-child(n + 2) {
    color: red;
}
```
</CodeGroupItem>
</CodeGroup>


<DisplayBox>

<CSS-Demo-11></CSS-Demo-11>

</DisplayBox>

接着来看几个例子

```css
/* 选择位置在偶数上的标签 */
:nth-child(2n) {
    
}
/* 选择位置在奇数上的标签 */
:nth-child(2n + 1) {
    
}
/* 选择前三个标签 */
:nth-child(-n + 3) {
    
}
/* 跳过前 4 个标签 */
:nth-child(n + 5) {
    
}
```

与 `:nth-child` 相对的是 `:nth-last-child`，`:nth-last-child` 表示倒着数，例如 `nth-last-child(1)` 表示选择倒数第一个标签，看几个例子

```css
/* 跳过最后一个标签 */
:nth-last-child(n + 2) {
    
}
/* 选择最后三个标签 */
:nth-last-child(-n + 3) {
    
}
```

>TODO
>
>:first-child :last-child

### :nth-of-type() 和 :nth-last-of-type()

事情还没有结束，给出如下 `html` 标签

```html
<div>
    <div>d1</div>
    <p>p1</p>
    <p>p2</p>
    <div>d2</div>
    <p>p3</p>
    <p>p4</p>
</div>
```

如果希望选择所有 `p` 标签里面的第三个 `p` 标签，这个时候如果通过 `:nth-child` 来实现就比较麻烦，可能就需要去数第三个 `p` 标签在哪个位置，但是如果 `HTML` 的结构一旦发生改变，还得重新数。通过 `:nth-of-type` 可以轻松的选择

```css
p:nth-of-type(3) {
    coloe: red;
}
```

`p:nth-of-type(3)` 首先会找出 `p` 的父标签下的所有标签为 `p` 的子标签，然后选择第三个子标签。与 `nth-child` 不同的是这里规定了类型。

<DisplayBox>

<CSS-Demo-12></CSS-Demo-12>

</DisplayBox>

`:nth-last-of-type` 则表示倒着数，具体在 `:nth-last-child` 有过介绍，不再详述。

>:first-of-type :last-of-type

### :only-child 和 :only-of-type

只包含一个子元素

### :empty

## 目标伪类

当一个元素的 `id` 与地址栏中的 `hash` 部分(也就是地址栏 `#` 后面的部分)相同，这种状态的元素可以通过 `:target` 进行选中

<CodeGroup>
<CodeGroupItem title="html" active>
```html
<div>
    <div><a href="#test">点我</a></div>
    <p id="test">Hello World</p>
</div>
```
</CodeGroupItem>

<CodeGroupItem title="css">
```css
:target {
    color: red;
}
```
</CodeGroupItem>
</CodeGroup>

<DisplayBox>
<CSS-Demo-30 />
</DisplayBox>

当我们点击链接时，会将地址的 `hash` 部分改为其 `herf` 的值，也就是 `p` 标签 `id` 的值，所以目标伪类选择器就可以选中该 `p` 标签，将其颜色设置为红色。 

## 匹配伪类

### :not

我们可以通过选择器选择具有什么特征的元素，我们也可以通过否定伪类选择器 `:not()` 不选择具有什么特征的选择器

<CodeGroup>
<CodeGroupItem title="html" active>
```html
<div>
  <p class="no-select">Hello World</p>
  <p>Hello World</p>
</div>
```
</CodeGroupItem>

<CodeGroupItem title="css">
```css
p:not(.no-select) {
  color: red;
}
```
</CodeGroupItem>
</CodeGroup>

<DisplayBox>
<CSS-Demo-31 />
</DisplayBox>

上面有两个 `p` 标签，其中一个具有类名 `no-select`，我们通过 `p:not(.no-select)` 选择了除了具有 `.no-select` 类名以外的所有 `p` 标签，将其文字颜色设置为红色。

### :where 和 :is

有的时候我们会写出

<Disqus />